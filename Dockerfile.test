# Dockerfile para executar testes
FROM golang:1.23-alpine

# Instalar dependências necessárias
RUN apk add --no-cache git

# Definir diretório de trabalho
WORKDIR /app

# Copiar go.mod e go.sum primeiro (melhor cache)
COPY go.mod go.sum ./

# Baixar dependências
RUN go mod download

# Copiar todo o código fonte
COPY . .

# Comando padrão: executar todos os testes com cobertura
CMD ["go", "test", "-v", "-cover", "./..."]
